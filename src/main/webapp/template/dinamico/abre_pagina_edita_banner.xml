<?xml version="1.0" encoding="UTF-8"?>
<engine>
	<template selector="#content_principal">

	<fieldset class="orderingButtons">
	<legend>Ordenação</legend>
			<input id="ordering-initial-date" class="btNone" type="button" value="Data inicial de exibição"/>
			<input id="ordering-final-date" class="btNone" type="button" value="Data final de exibição"/>
			<input id="ordering-creation-date" class="btNone" type="button" value="Data de criação"/>
	</fieldset>


		<ul class="listagem-banner">
			{for banner in jsonArrayBanner}
				<li id="${banner.postObjectJson.id}">
					
					<div class="dados-banner">
						<form class="form-editar-banner" id="${banner.postObjectJson.id}">
							<ul>
								<li>
									<label for="titulo_${banner.postObjectJson.id}">Titulo:</label> 
									<input type="text" value="${banner.postObjectJson.titulo}" id="titulo_${banner.postObjectJson.id}" />
								</li>
								<li>
									<label for="dataInicio_${banner.postObjectJson.id}">Data de início:</label> 
									<input type="text" value="${banner.postObjectJson.dataInicio}" id="dataInicio_${banner.postObjectJson.id}" class="date-picker inicio"/>
								</li>
								<li>
									<label for="dataFim_${banner.postObjectJson.id}">Data de fim:</label> 
									<input type="text" value="${banner.postObjectJson.dataFim}" id="dataFim_${banner.postObjectJson.id}" class="date-picker fim"/>
								</li>
								<li>
									<label for="dataDeAtualizacao_${banner.postObjectJson.id}">Ultima modificação:</label> 
									<input type="text" value="${banner.postObjectJson.dataDeAtualizacao}" id="dataDeAtualizacao_${banner.postObjectJson.id}" disabled="true"/>
								</li>
								<li>
									<label for="bannerLink_${banner.postObjectJson.id}">Link:</label> 
									<input type="text" id="bannerLink_${banner.postObjectJson.id}" value="${banner.postObjectJson.link}"/>
								</li>
								<li class="img-container">
									<div class="img-container"><img src="/s/banner/${banner.postObjectJson.id}" /></div>
								</li>
								<li>
									<input type="submit" value="Editar!" />
								</li>
							</ul>
						</form>
					</div>
				</li>
			{/for}	
		</ul>

	</template>
	<script>
		$('.form-editar-banner').each(function() {
		    dextranet.banner.inicializaDatepicker(false, $(this).find('ul li .date-picker.inicio'), $(this).find('ul li .date-picker.fim'));
		});
		
		$(".form-editar-banner").submit(function(){
			var form = $(this);
			dextranet.banner.editarBanner($(form).attr("id"));
			return false;
		});

		$('#ordering-initial-date').click(function() {
			dextranet.banner.ordenaBanners('dataInicio', $('.dados-banner').parent());
		});

		$('#ordering-final-date').click(function() {
			dextranet.banner.ordenaBanners('dataFim', $('.dados-banner').parent());
		});

		$('#ordering-creation-date').click(function() {
			dextranet.banner.ordenaBanners('dataDeAtualizacao', $('.dados-banner').parent());
		});
	</script>
</engine>
